var util = require('util');

module.exports = function _load_app(root, config, app) {
    var app_info = require(root);

    var loader;
    var loader_path;
    switch (app_info.type) {
        case 'REST':
            loader_path ='strata_mvc/loader/REST';
            break;

        case 'home':
            loader_path = 'strata_mvc/loader/home';
            break;

        default:
            loader_path = 'strata_mvc/loader/default';
    }

    loader = require(loader_path);

    if (!(typeof loader == 'function')){
        throw new Error(util.format("%s is not a function", loader_path));
    }
    loader(root, config, app, app_info);
}