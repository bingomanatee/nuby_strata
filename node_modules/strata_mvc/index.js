var fs = require('fs');
var path = require('path');
var util = require('util');
var strata = require('strata');
var ondir = require('strata_mvc/support/ondir');
var loader = require('strata_mvc/loader');

module.exports =  {

    load_apps: function(app_path, config, app) {
        app = _init_app(app);
        ondir(app_path, null, function(root) {
            loader(root, config, app);
        });
    }

}

function _init_app(app) {
    if (!app) {
        app = new strata.Builder();
    }
    return app;
}