var mock = require('./../node_modules/strata/lib/mock.js');
var util = require('util');
var nuby = require('./../lib');
var path = require('path');
var static = nuby.loader.static;
var proper = require('./../lib/support/proper_path');
var resources = [];

module.exports = {
    setUp:function (setup_callback) {
        resources.push(
            static.create_resource('ondir',
                path.join(__dirname, '../test_resources/ondir'), ['index.html']));
        setup_callback();
    },

    'test-proper': function(test){

        test.equal('/foo', proper('foo'), 'making foo proper');

        test.done();
    },

    'test-static': function(test){
        var found = static.find_file('/ondir/3/two.txt', resources);

        test.equal(path.join(__dirname, '../', '/test_resources/ondir/3/two.txt'), found[0], 'test finding two.txt');
        test.done();
    }

}