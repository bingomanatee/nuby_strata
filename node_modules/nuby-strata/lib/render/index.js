var ejs = require('./../../node_modules/ejs');
var fs = require('fs');
var util = require('util');
var path = require('path');

module.exports = function (view_path, params, callback) {
    if (!path.existsSync(view_path)){
        throw new Error(util.format('%s: Cannot find view_path %s', __dirname, view_path));
    }
    if (typeof (callback) != 'function'){
        throw new Error(util.format('%s: callback is not a function', __dirname))
    }
 //   console.log('ns-render:: path %s, params: %s', path, util.inspect(path));

    fs.readFile(view_path, function (err, data) {
     //   console.log('ns-render:: data %s', data.toString());
        callback(null, ejs.render(data.toString(), {locals:params}));
    });
}