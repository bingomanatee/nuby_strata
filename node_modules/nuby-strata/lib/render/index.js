var ejs = require('./../../node_modules/ejs');
var fs = require('fs');
var util = require('util');

module.exports = function (path, params, callback) {
    if (typeof (callback) != 'function'){
        throw new Error(util.format('%s: callback is not a function', __dirname))
    }
 //   console.log('ns-render:: path %s, params: %s', path, util.inspect(path));

    fs.readFile(path, function (err, data) {
     //   console.log('ns-render:: data %s', data.toString());
        callback(null, ejs.render(data.toString(), {locals:params}));
    });
}