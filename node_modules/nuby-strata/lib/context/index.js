function Context(config) {
    this.root = config.root;
    if (config.hasOwnProperty('lang')) {
        this.lang = config.lang;
    }

    if (config.hasOwnProperty('root')) {
        this.root = config.root;
    }

    if (config.hasOwnProperty('auth')) {
        this.auth = config.auth;
    }
    this.config = config;
}

Context.prototype = {
    lang:null,
    root:null,
    models:{},
    auth:null,
    controllers:{},
    can:function (task, auth_context, if_can, if_block) {
        if ((!this.auth) || (this.auth(task, auth_context))) {
            if_can();
        } else {
            if_block();
        }
    },
    render:function (view_path, env, callback, action) {
        var nuby_strata = require('./..');
        nuby_strata.render.render_action(view_path, env, callback, action);
    },
    layout:function (layout_path, env, body, callback, action) {
        var nuby_strata = require('./..');
        nuby_strata.render.render_layout(layout_path, env, body, callback, action);
    }

}

module.exports = {
    Context:Context,

    create:function (config) {
        return new Context(config);
    }
}